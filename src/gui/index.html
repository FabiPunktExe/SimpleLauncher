<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <img id="background-image" src="background.jpg">
        <div id="logo"><img src="logo.png"><p>impleClient</p></div>
        <button id="launch" onclick="electronAPI.send('launch', document.getElementById('launch').value)" value=""></button>
        <button id="account"><p style="visibility: hidden;">Click to switch</p></button>
        <img id="avatar" src="https://minotar.net/helm/mhf_question/64.png">
        <div id="versions"></div>
        <script>
            const versions = document.getElementById('versions')
            function clickVersionsButton() {
                if (versions.style.visibility == 'visible') versions.style.visibility = 'hidden'
                else versions.style.visibility = 'visible'
            }
        </script>
        <button id="versions-button" onclick="clickVersionsButton()"></button>
        <script>
            electronAPI.on('simpleclient_versions', (event, data) => {
                Array.from(versions.children).forEach(child => child.remove())
                const changeVersion = version => {
                        document.getElementById('launch').innerText = 'LAUNCH ' + version.minecraft_version
                        document.getElementById('versions-button').value = version.id
                        document.getElementById('versions-button').innerText = version.minecraft_version
                }
                data.forEach(version => {
                    const button = document.createElement('button')
                    button.id = version.id
                    button.className = 'version'
                    button.innerText = version.minecraft_version
                    button.onclick = () => changeVersion(version)
                    versions.appendChild(button)
                })
                changeVersion(data[data.length - 1])
            })
            window.onclick = event => {
                if (!event.target.matches('#versions-button') && versions.style.visibility == 'visible') {
                versions.style.visibility = 'hidden'
                }
            }
        </script>
    </body>
</html>